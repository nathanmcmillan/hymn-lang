<!DOCTYPE html>
<html>
  <head>
    <title>Hymn</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="index.css" />
  </head>
  <body>
    <script src="hymn.js"></script>
    <section id="top"><button onclick="run()">Run</button></section>
    <section id="play">
      <div id="code"><textarea id="source" autocorrect="off" autocomplete="off" autocapitalize="none" spellcheck="false"></textarea></div>
      <p id="out"></p>
    </section>
    <script>
      const source = localStorage.getItem('source')
      if (source) {
        document.getElementById('source').value = source
      }
      function run() {
        const source = document.getElementById('source').value
        localStorage.setItem('source', source)
        const hymn = new Hymn()
        try {
          const error = hymnInterpret(hymn, source)
          if (error !== null) {
            document.getElementById('out').textContent = error
          }
        } catch (exception) {
          document.getElementById('out').textContent = exception
          console.error(exception)
        }
      }
    </script>
  </body>
</html>
