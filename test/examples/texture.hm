func load-texture(wad) {
    let name = wad-get(wad, "paint")
    let width = int(wad-get(wad, "columns"))
    let height = int(wad-get(wad, "rows"))
    let transparency = 0
    if wad-has(wad, "transparency") transparency = int(wad-get(wad, "transparency")) }
    let data = wad-get(wad, "pixels")
    let pixels = []
    for h = 0, h < height {
        let row = h * width
        for c = 0, c < width {
            let i = c + row
            let p = int(data[c])
            if p == transparency { pixels[i] = 255 }
            else { pixels[i] = p }
        }
    }
    let sprites = none
    return { name: name, width: width, height: height, pixels: pixels, sprites: sprites }
}
